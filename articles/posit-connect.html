<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Posit Connect • pins</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Posit Connect">
<!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KHBDBW7');</script><!-- End Google Tag Manager -->
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KHBDBW7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pins</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/pins.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/customize-pins-metadata.html">Create consistent metadata for pins</a></li>
    <li><a class="dropdown-item" href="../articles/managing-custom-formats.html">Managing custom formats</a></li>
    <li><a class="dropdown-item" href="../articles/pins-update.html">Upgrading to pins 1.0.0</a></li>
    <li><a class="dropdown-item" href="../articles/posit-connect.html">Posit Connect</a></li>
    <li><a class="dropdown-item" href="../articles/using-board-url.html">Using web-hosted boards</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/announcing-pins-1-1-0/">pins 1.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://blog.rstudio.com/2021/10/04/pins-1-0-0/">pins 1.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://blog.rstudio.com/2020/05/29/pins-0-4-0-versioning/">pins 0.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://blog.rstudio.com/2019/11/28/pins-0-3-0-azure-gcloud-and-s3/">pins 0.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://blog.rstudio.com/2019/09/09/pin-discover-and-share-resources/">pins 0.2.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/pins-r/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Posit Connect</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstudio/pins-r/blob/main/vignettes/posit-connect.Rmd" class="external-link"><code>vignettes/posit-connect.Rmd</code></a></small>
      <div class="d-none name"><code>posit-connect.Rmd</code></div>
    </div>

    
    
<p>This vignette demonstrates how you might use pins and <a href="https://posit.co/products/enterprise/connect/" class="external-link">Posit Connect</a>
together to automate ETL for a Shiny app. Pulling expensive data
manipulation out of your Shiny app is a great way to <a href="https://mastering-shiny.org/performance.html#schedule-data-munging" class="external-link">improve
performance</a>, and pins makes it easy to schedule data updates in a
way that automatically flows into your app.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pins.rstudio.com/">pins</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="sharing-tidied-data">Sharing tidied data<a class="anchor" aria-label="anchor" href="#sharing-tidied-data"></a>
</h2>
<p>Imagine you’re interested in what’s going on in the news, so you’ve
written a little code to scrape the BBC world news feed and turn it into
a tidy dataset:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://xml2.r-lib.org/" class="external-link">xml2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">xml</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html" class="external-link">read_xml</a></span><span class="op">(</span><span class="st">"http://feeds.bbci.co.uk/news/rss.xml"</span><span class="op">)</span>  </span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="co"># Read a saved version of the data to keep this vignette reproducible</span></span>
<span>  <span class="va">xml</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html" class="external-link">read_xml</a></span><span class="op">(</span><span class="st">"bbc-news.xml"</span><span class="op">)</span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">items</span> <span class="op">&lt;-</span> <span class="va">xml</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="http://xml2.r-lib.org/reference/xml_find_all.html" class="external-link">xml_find_all</a></span><span class="op">(</span><span class="st">"//item"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bbc_news</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="va">items</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="http://xml2.r-lib.org/reference/xml_find_all.html" class="external-link">xml_find_first</a></span><span class="op">(</span><span class="st">"./title"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="http://xml2.r-lib.org/reference/xml_text.html" class="external-link">xml_text</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  date <span class="op">=</span> <span class="va">items</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="http://xml2.r-lib.org/reference/xml_find_all.html" class="external-link">xml_find_first</a></span><span class="op">(</span><span class="st">"./pubDate"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="http://xml2.r-lib.org/reference/xml_text.html" class="external-link">xml_text</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  url <span class="op">=</span> <span class="va">items</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="http://xml2.r-lib.org/reference/xml_find_all.html" class="external-link">xml_find_first</a></span><span class="op">(</span><span class="st">"./guid"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="http://xml2.r-lib.org/reference/xml_text.html" class="external-link">xml_text</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">bbc_news</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 71 × 3</span></span></span>
<span><span class="co">#&gt;    title                                                       date  url  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Diana interview: PM concerned after inquiry into BBC deceit Fri,… http…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Covid in Scotland: Glasgow to be only Scottish area in lev… Fri,… http…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Prince Harry says heavy drinking masked pain of mum Diana'… Fri,… http…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Coronavirus: Spain to lift restrictions for UK and Japanes… Fri,… http…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Diana interview: Whistleblower wants apology from BBC boss… Fri,… http…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Mayhill: Swansea rioters face robust action, police vow     Fri,… http…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> UK to offer Australia tariff-free trade deal despite farme… Fri,… http…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Leonard Blavatnik named UK's richest person with £23bn for… Fri,… http…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Lady Gaga had a 'psychotic break' after sexual assault lef… Fri,… http…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Big cats seized from park belonging to Tiger King couple    Fri,… http…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 61 more rows</span></span></span></code></pre></div>
<p>Wouldn’t it be nice to spare your colleagues the work of reproducing
this data, and provide them directly with the tidy tibble? That’s easy
to do with pins:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">board</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/board_connect.html">board_connect</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">board</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/pin_read.html">pin_write</a></span><span class="op">(</span><span class="va">bbc_news</span><span class="op">)</span></span></code></pre></div>
<p>If you open the pin on RSC (e.g. by running
<code>board %&gt;% pin_browse("news_total")</code>), you’ll see some
metadata about the pin, a preview of the data, and a control panel which
allows you to control who can see the data. Assuming you’ve given your
colleagues access, they can now easily pull down the data for their own
analysis:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">board</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/board_connect.html">board_connect</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">board</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/pin_read.html">pin_read</a></span><span class="op">(</span><span class="st">"your_name/bbc_news"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="automating">Automating<a class="anchor" aria-label="anchor" href="#automating"></a>
</h2>
<p>Here the underlying data will be changing regularly, but the pinned
data will only change when you run <code><a href="../reference/pin_read.html">pin_write()</a></code>. Wouldn’t it
be great if we could automate that process? One way to do so is with
RSC’s <a href="https://docs.posit.co/connect/user/scheduling/" class="external-link">scheduled
reports</a>.</p>
<p>First, take your code and put it in an Rmd:</p>
<pre><code>---
title: BBC news
---

```{r}
library(pins)
library(xml2)

xml &lt;- read_xml("http://feeds.bbci.co.uk/news/rss.xml")
items &lt;- xml %&gt;% xml_find_all("//item")

bbc_news &lt;- tibble::tibble(
  title = items %&gt;% xml_find_first("./title") %&gt;% xml_text(),
  date = items %&gt;% xml_find_first("./pubDate") %&gt;% xml_text(),
  url = items %&gt;% xml_find_first("./guid") %&gt;% xml_text()
)

board &lt;- board_connect()
board %&gt;% pin_write(bbc_news)
```

```{r}
bbc_news
```</code></pre>
<p>Then publish it to Posit Connect, and schedule it to run as often as
you like. Assuming that you have Posit Connect 1.9.0 or later you don’t
need to provide any arguments to <code><a href="../reference/board_connect.html">board_connect()</a></code>; pins will
automatically publish to the same Connect instance that’s running the
report.</p>
</div>
<div class="section level2">
<h2 id="shiny-apps">Shiny apps<a class="anchor" aria-label="anchor" href="#shiny-apps"></a>
</h2>
<p>If you’re using automatically updated data in a <a href="https://shiny.posit.co/" class="external-link">Shiny</a> app, you can use
<code><a href="../reference/pin_reactive_read.html">pin_reactive_read()</a></code> to create a reactive dependency so that
your app will automatically update shortly after the data changes:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pins.rstudio.com/">pins</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">board</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/board_connect.html">board_connect</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/titlePanel.html" class="external-link">titlePanel</a></span><span class="op">(</span><span class="st">"News from the BBC"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/htmlOutput.html" class="external-link">htmlOutput</a></span><span class="op">(</span><span class="st">"news"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">news</span> <span class="op">&lt;-</span> <span class="va">board</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/pin_reactive_read.html">pin_reactive_read</a></span><span class="op">(</span><span class="st">"hadley/bbc_news"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">news</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderUI.html" class="external-link">renderUI</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="va">title</span> <span class="op">&lt;-</span> <span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/htmlEscape.html" class="external-link">htmlEscape</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/news.html" class="external-link">news</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">title</span><span class="op">)</span></span>
<span>    <span class="va">links</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"&lt;a href='"</span>, <span class="fu"><a href="https://rdrr.io/r/utils/news.html" class="external-link">news</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">url</span>, <span class="st">"'&gt;"</span>, <span class="va">title</span>, <span class="st">"&lt;/a&gt;"</span><span class="op">)</span></span>
<span>    <span class="va">bullets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"  &lt;li&gt;"</span>, <span class="va">links</span>, <span class="st">"&lt;/li&gt;"</span>, collapse <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/HTML.html" class="external-link">HTML</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"&lt;ul&gt;"</span>, <span class="va">bullets</span>, <span class="st">"&lt;/ul&gt;"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></code></pre></div>
<p>If you deploy this app and watch it while your scheduled reported
runs, you’ll see the data update automatically.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://juliasilge.com/" class="external-link">Julia Silge</a>, <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, Javier Luraschi, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer>
</body>
</html>
